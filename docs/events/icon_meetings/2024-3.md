# ICON Meeting 2024/3

*25 September 2024, ETH Zurich (L 17.1) and via Zoom*

## Participants (on-site)
Michael Jähn (MJ),
Matthieu Leclair (ML),
Annika Lauber (AL),
Tina Schnadt (TS),
Doris Folini (DF),
Anurag Dipankar (AD),
Diego Villanueva (AV),
Andrina Caratsch (AC)


## Participants (Zoom)
Matthias Kraushaar (MK),
Marco Arpagaus (MA),
Brigitta Goger (BG),
Arash Hamzehloo (AH),
Mikael Stellio (MS),
Christian Steger (CS),
Will Sawyer (WS),
Nander Wever (NW)



_Minutes by Annika Lauber_

## Reports

### C2SM (Michael Jähn, Annika Lauber, Matthieu Leclair)
MJ welcomes everyone and shares the [latest news about ICON from C2SM :material-open-in-new:](TODO: Micha){:target="_blank"}.

AD asks about the transient aerosol port and who helped fix the bug. AL explains that many people were involved, including DWD, C2SM, and MPI, and that there were actually three bugs, which made the issue difficult to identify. MJ adds that finishing up the port also takes longer now because so many people are involved, requiring a lot of communication and waiting

WS asks if preparatory projects can really be submitted at any time. MK answers that while project proposals are gathered for specific deadlines, preparatory projects can be submitted at any time.

CS asks about isolrad and what it does. MJ responds that he can't say much, as he hasn't really looked into it yet.

AH wants to ask about ALPS and mentions that they were given access to Daint but don’t have a user environment set up there and are struggling with ICON on the new system. Erik tried compiling ICON with MJ’s help and was successful. AH asks if they should have access to Säntis instead of Daint. ML responds that this is a question for CSCS and depends on their decision—whether weather and climate work will be limited to Säntis or shared between Säntis and Tödi. Ben Cumming thought that everything should run on Säntis. Once CSCS provides more details, they will offer support. ML asks if AH's access is part of a preparatory project, but AH clarifies that it’s a larger project and they believed they had admin rights to create a user environment. ML confirms they do, but advises that for now, they should rely on what is already available.

MK adds that the differences between Tödi, Säntis, and Daint will be minimal, and the systems should function the same way. Admin rights are not necessary to create a user environment, but it will take some time to adapt to the new system. MK suggests the possibility of tagging user environments for specific systems, although most should be visible. He also shares the following links:
- General information: https://github.com/eth-cscs/UserLabDay/blob/master/2024/general_information_alps.pdf
- GitHub repo: https://github.com/eth-cscs/UserLabDay/tree/master/2024

AH asks whether Daint or Säntis will be the long-term solution for their applications. MK explains that Säntis will be mainly dedicated to climate and weather, specifically for ICON (EXCLAIM), while a few tasks will still go to Daint. DF mentions that their colleagues are currently doing benchmarking on Tödi, but are now on Daint.Alps, where certain images were missing. DF asks if those images will be available. ML advises not to rely on his images anymore, explaining that there's a workaround using the user environment. You can query the database to see what's installed on the system. DF asks if this is possible even without Tödi access, and ML thinks it is.

DF then asks if they can expect the images from Tödi to be available on Daint. ML replies that although it's not a long-term solution, those images should eventually be deployed on Daint. However, it won’t be as straightforward. DF points out that many people need to complete benchmarking by October. AH asks if ICON can be compiled by loading the user environment without those missing images. ML explains that the software stack image is the same as the user environment and can be accessed on each cluster, but using it isn't always straightforward. Currently, the images are interchangeable, though they still depend on the operating system. In the future, user environments on one cluster may not work on another.
MK confirms that the risk of incompatibility exists and they've already seen this with MCH. Regarding the missing images on Daint, MK explains that the NVIDIA part wasn’t provided completely, which is why he created another environment. These images are not preloaded on the system, so users need to search for them using the user environment tool. MK suggests trying the command `uenv image find -s todi` to locate the images.

BG mentions using Tödi and that while the instructions on C2SM initially worked, two weeks later the executables stopped working and the instructions disappeared. ML responds that there is now an Alps section on the landing page. It should be possible to do the same tasks as before, but without using absolute paths to his environment. Instead, tags can be used. The updated instructions are available on the workshop materials page as well as the user landing page (TODO Matthieu: please add links). ML encourages anybody to reach out to him on Slack if any issues arise.

AD from Empa asks if ML has managed to run ICON-ART. ML responds that he has only been testing regular ICON, but Erik was successful in compiling it. AH confirms that Erik followed a workaround. AD asks if there is a plan for C2SM to support ICON-ART. ML explains that ICON-ART is not in the C2SM pipeline and suggests that users create a test case, and C2SM can help set up the CI infrastructure. AH mentions they have an old test case (icon-kit) that needs updating. MJ adds that ICON-ART is now part of ICON-NWP, and a test case could be set up and added.

DF asks about using default ICON versions and whether the run scripts will be used on Alps in the same way. ML replies that it’s not yet finalized for ICON. DF inquires about a timeline, and ML says it will still take some time. MJ mentions they will provide the latest OS release and testing.

WS brings up that Jonas integrated the CSCS-CI into the normal BB workflow, and much of the software is available. They set up a service user and have a project for that but still need to complete a few tasks before Jonas returns. There’s a discussion about the mechanism for triggering the runners, and they will need to talk to Ralf and Sergey. WS estimates that it will take three to four weeks until the CI system is fully operational, aiming for the end of October to overlap with Piz Daint.

DF shares her experience from last week, where she had to furnish a run script herself for a simple test case (heldsuarez). She asks if they should use the job reporting tool suggested by CSCS. WS says they’ll need to discuss that further, as he’s not directly involved. He suggests continuing the conversation offline with Matthias. DF notes that several people are relying on the outcome of this work.


### Doris Folini
tried to do benchmarking with latest icon on C2SM website. Trying to find input files. REalizing that uenv using default moutn point, no longer using default mount point.
ML there has been a small change. Now trying to access metadata, which wasnt availble first. So download again.
DF looked around various resources. keeps struggling: needed to recompile from scratch if jsbach wanted for example?
ML not a small change, so probably yes. Not like changing source file

### Anurag Dipankar
left

### Diego Villanueva
planning to use icon-ham. postdoc will start next year. maybe also going into icon-clm. hoping it will be ready next year

### Andrina Caratsch
aerosol-cloud interactions int tropical cyclons, going to ICON-hma

### Nander Wever
works for MCH and SLF. looking at mixed snow component in icon. should become operational in icon. Multilayer snow model.

### Marco Arpagaus
switched of COSMO two weeks ago. It is still running in other countries. nix corresponds to terra. should start working on reanalysis using 20 years reanalysis data.

### Brigitta Goger
recent month wrote to icon publicaion. cloudson icon
https://rmets.onlinelibrary.wiley.com/doi/10.1002/qj.4799
https://egusphere.copernicus.org/preprints/2024/egusphere-2024-1989/

### Arash Hamzehloo
porting components of art to gpu. trying to compile icon-art on new system

### Mikael Stellio
icon-ham with Sylvaine. Mainly on GPU site. worked on transtioning odl daint to new daint. Compiling on GPU. started running on 10km resolution run. had problems at runtime but now working and is doing benchmarking now.

### Christian Steger
MCH: radiation topography scheme in icon. besides extpar related fields, new topography set. supervising a master thesis project with BG: high resolution land use data. Work mainly focused on extpar related icon stuff

### Will Sawyer
has been working on benchmarking the icon on the new system. Alps was officially inaugarated on Saturday. Benchmarked various varient of icon. prepares presentation: one for this afternoon at exclaim. Can share early version. Shares screen

### Matthias Kraushaar
service manager for climate & weather. By training not related to weather & climate but can feel the pain. Task is to be the find the solution to get work going. Alps is very good for ML, which will aslo become part of the climate & weather. Will help to introduce the new futures. They created Slack space for user. Will create chanel for weather & climate platform. Will be monitoring chanel from cscs side but if it's too technical, it should become a ticket.
WS: failing nodes: what is the channel to report?
MK it could be the icon channel. you can also open a ticket.
WS: there is no data base for people to check what is currently failing
MK working on status pages. They could also use that to communicate issues.

